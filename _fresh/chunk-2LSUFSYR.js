import{a as P,b as k,d as L}from"./chunk-5F225ZSV.js";import{a as t}from"./chunk-BRQEXE2C.js";import{a as p,b as d,c as u}from"./chunk-IN5SKDVW.js";var R=a=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",class:"w-5 h-5",...a,children:t("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16z",clipRule:"evenodd"})});var T=a=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",class:"w-5 h-5",...a,children:t("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})});var V=({initialOptions:a,buttonText:M,onChange:h,name:f,buttonClass:O="",listClass:z="",activeListItemClass:b="bg-gray-600",setListItemClass:H=()=>""})=>{let[r,c]=p(!1),[o,S]=p(a),[s,m]=p(-1),[v,B]=p({y:"bottom-[0px] mb-1",x:"left-[0px]"}),w=u(null),i=u(null),x=o.map(()=>u(null)),C=o.reduce((e,[n,l])=>e+(l?1:0),0),I=()=>c(!r),y=e=>{S(n=>(n[e][1]=!n[e][1],[...n])),c(!1),i.current?.focus()},A=e=>L(e.key,{Tab:()=>c(!1),Enter:()=>{r&&s>=0&&(y(s),e.preventDefault(),i.current?.focus())},Escape:()=>{c(!1),i.current?.focus()},ArrowUp:()=>{m(n=>n<=0?o.length-1:n-1),e.preventDefault()},ArrowDown:()=>{m(n=>n>=o.length-1?0:n+1),e.preventDefault()},_:()=>{}}),$=e=>{w.current?.contains(e.target)||c(!1)},g=()=>{if(i.current===null)return;let e=i.current.getBoundingClientRect(),n=e.top,l=document.body.clientHeight-e.bottom,D=e.left,E=document.body.clientWidth-e.right;B({y:l>n?`top-[${e.bottom}px] mt-1`:`bottom-[${e.top}px] mb-1`,x:E>D?`left-[${D}px]`:`right-[${E}px]`})};return d(()=>(globalThis.addEventListener("mousedown",$),globalThis.addEventListener("resize",g),()=>{globalThis.removeEventListener("mousedown",$),globalThis.removeEventListener("resize",g)})),d(()=>{m(-1),g()},[r]),d(()=>{r&&s>=0&&x[s].current?.focus()},[r,s]),d(()=>{h&&h(o)},[o]),t("div",{ref:w,onKeyDown:A,children:[t("button",{class:`px-2 py-1 flex space-x-2 items-center ${O}`,onClick:I,ref:i,type:"button","aria-haspopup":"listbox","aria-expanded":r,children:[C>0&&t("span",{class:"bg-white text-[#0d1117] px-1 rounded-md text-sm",children:C}),t("span",{children:M}),t("span",{class:"sr-only",children:"Toggle multiselect menu"}),r?t(k,{}):t(P,{})]}),o.map(([e,n])=>t("input",{type:"hidden",name:n?f:void 0,value:e,"aria-hidden":"true"})),r&&t("ul",{class:`absolute z-8 ${v.y} ${v.x} ${z}`,role:"listbox","aria-activedescendant":s>=0?`${f}-option-${s}-${o[s][0]}`:void 0,children:o.map(([e,n],l)=>t("li",{onClick:()=>y(l),class:`flex justify-between space-x-2 cursor-pointer px-2 py-2                items-center hover:${b} ${l===s?b:""} ${H(l)}`,role:"option",id:`${f}-option-${l}-${e}`,tabIndex:0,ref:x[l],"aria-selected":n,children:[n?t(T,{}):t(R,{}),t("span",{children:e})]},e))})]})};export{V as a};
