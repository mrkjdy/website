import{a as C,b as D,d as E}from"./chunk-5F225ZSV.js";import{a as t}from"./chunk-BRQEXE2C.js";import{a as c,b as d,c as p}from"./chunk-IN5SKDVW.js";var L=o=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5",...o,children:t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})});var j=({options:o,initialSelected:O,buttonText:P,onChange:g,name:u,buttonClass:k="",listClass:H="",activeListItemClass:b="bg-gray-600",setListItemClass:R=()=>""})=>{let[s,a]=c(!1),[l,M]=c(O),[r,f]=c(-1),[h,z]=c({y:"bottom-[0px] mb-1",x:"left-[0px]"}),x=p(null),i=p(null),w=o.map(()=>p(null)),I=()=>a(!s),v=e=>{M(o[e]),a(!1),i.current?.focus()},S=e=>E(e.key,{Tab:()=>a(!1),Enter:()=>{s&&r>=0&&(v(r),e.preventDefault(),i.current?.focus())},Escape:()=>{a(!1),i.current?.focus()},ArrowUp:()=>{f(n=>n<=0?o.length-1:n-1),e.preventDefault()},ArrowDown:()=>{f(n=>n>=o.length-1?0:n+1),e.preventDefault()},_:()=>{}}),y=e=>{x.current?.contains(e.target)||a(!1)},m=()=>{if(i.current===null)return;let e=i.current.getBoundingClientRect(),n=e.top,A=document.body.clientHeight-e.bottom,$=e.left,T=document.body.clientWidth-e.right;z({y:A>n?`top-[${e.bottom}px] mt-1`:`bottom-[${e.top}px] mb-1`,x:T>$?`left-[${$}px]`:`right-[${T}px]`})};return d(()=>(globalThis.addEventListener("mousedown",y),globalThis.addEventListener("resize",m),()=>{globalThis.removeEventListener("mousedown",y),globalThis.removeEventListener("resize",m)})),d(()=>{f(-1),m()},[s]),d(()=>{s&&r>=0&&w[r].current?.focus()},[s,r]),d(()=>{g&&g(l)},[l]),t("div",{ref:x,onKeyDown:S,children:[t("button",{class:`px-2 py-1 flex space-x-2 items-center ${k}`,onClick:I,ref:i,type:"button","aria-haspopup":"true","aria-expanded":s,children:[t("span",{children:P??l}),t("span",{class:"sr-only",children:"Toggle dropdown menu"}),s?t(D,{}):t(C,{})]}),t("input",{type:"hidden",name:u,value:l,"aria-hidden":"true"}),s&&t("ul",{class:`absolute z-8 ${h.y} ${h.x} ${H}`,role:"listbox","aria-activedescendant":`${u}-option-${r}-${o[r]}`,children:o.map((e,n)=>t("li",{onClick:()=>v(n),class:`flex justify-between space-x-2 cursor-pointer px-2 py-2               items-center justify-end hover:${b} ${n===r?b:""} ${R(n)}`,role:"option",id:`${u}-option-${n}-${e}`,tabIndex:0,ref:w[n],"aria-selected":e===l,children:[e===l&&t(L,{}),t("span",{children:e})]},e))})]})};export{j as a};
